# US-010: Pruebas Automatizadas de Integración y Persistencia

Como equipo de desarrollo, queremos contar con una suite de pruebas automatizadas que verifiquen el correcto funcionamiento de los endpoints y la persistencia en la base de datos para todas las entidades del sistema.

## Criterios de Aceptación

- [ ] Las pruebas deben utilizar una base de datos de prueba independiente (SQLite en memoria o archivo temporal).
- [ ] **Pruebas de Colegios:** Verificar el registro de un nuevo colegio y el inicio de sesión.
- [ ] **Pruebas de Categorías:** Verificar la creación de categorías, el listado y la ejecución del endpoint de seed.
- [ ] **Pruebas de Residuos:** Verificar el registro de residuos asociados a un colegio y categoría existentes, y comprobar que se guardan correctamente.
- [ ] **Pruebas de Alertas:** Verificar la creación, activación y recuperación de alertas por colegio.
- [ ] **Pruebas de Estadísticas:** Verificar que el cálculo de totales (kg y litros) sea correcto según los residuos registrados.
- [ ] Todas las pruebas deben ejecutarse y pasar con el comando `pytest`.

## Tareas

- [ ] Configurar el entorno de pruebas en `tests/conftest.py` (fixtures de FastAPI y Base de Datos).
- [ ] Crear `tests/test_colegios.py`: Registro y Login.
- [ ] Crear `tests/test_categorias.py`: CRUD y Seed.
- [ ] Crear `tests/test_residuos.py`: Registro, filtrado y validación de FKs.
- [ ] Crear `tests/test_alertas.py`: Gestión de alertas.
- [ ] Crear `tests/test_stats.py`: Validación de cálculos agregados.
- [ ] Automatizar la ejecución de las pruebas en el ciclo de desarrollo.
