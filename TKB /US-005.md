# HU-B05 · Manejo de errores y seguridad

**Como** desarrollador backend  
**Quiero** tener manejo centralizado de errores y CORS configurado  
**Para que** la API devuelva respuestas consistentes y el frontend pueda conectarse sin problemas.

---

##  Criterios de Aceptación

- [x] **Configuración CORS:** Permitir peticiones específicamente desde `http://localhost:5173` (Vite/React).
- [x] **Manejo de 404:** Los recursos no encontrados deben devolver un JSON estandarizado: `{ "detail": "Recurso no encontrado" }`.
- [x] **Manejo de 500:** Los errores no controlados del servidor deben devolver: `{ "detail": "Error interno del servidor" }`.
- [x] **Seguridad de Variables:** Ningún valor sensible (URLs, secretos, credenciales) debe estar hardcodeado; todo debe leerse desde un archivo `.env`.

---

## Tareas

| Código | Nombre | Estado |
| :--- | :--- | :--- |
| **TK-005-01** | Añadir `CORSMiddleware` en `main.py` con `allow_origins` desde `.env` | Hecho |
| **TK-005-02** | Crear handler global para `Exception` con `JSONResponse` | Hecho |
| **TK-005-03** | Crear handler para `HTTPException` personalizado | Hecho |
| **TK-005-04** | Revisar que ningún valor está hardcodeado fuera de `.env` | Hecho |
| **TK-005-05** | Probar que el frontend React puede hacer fetch sin errores de CORS | Hecho |

---
